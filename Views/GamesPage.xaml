<Page
    x:Class="SGSClient.Views.GamesPage" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:SGSClient.Models" xmlns:viewmodels="using:SGSClient.ViewModels"
    d:DataContext="{d:DesignInstance Type=viewmodels:GamesViewModel}"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <StackPanel
            Width="Auto" Margin="16" Padding="16,24,16,16"
            Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
            CornerRadius="{StaticResource OverlayCornerRadius}"
            Orientation="Vertical">
            <StackPanel
                HorizontalAlignment="Left" VerticalAlignment="Top" Orientation="Horizontal"
                Spacing="16">
                <TextBox
                    x:Name="SearchTextBox" Width="220" KeyDown="Input_KeyDown"
                    PlaceholderText="{Binding Source='Search by name', Converter={StaticResource L}, Mode=OneWay}" />
                <TextBox
                    x:Name="SearchAuthorTextBox" Width="220" KeyDown="Input_KeyDown"
                    PlaceholderText="{Binding Source='Search by author', Converter={StaticResource L}, Mode=OneWay}" />
                <ComboBox
                    x:Name="GameEngineComboBox" Width="220"
                    ItemsSource="{Binding GameEngines}"
                    KeyDown="Input_KeyDown"
                    PlaceholderText="{Binding Source='Select game engine', Converter={StaticResource L}, Mode=OneWay}"
                    SelectedItem="{Binding SelectedGameEngine, Mode=TwoWay}" />

                <ComboBox
                    x:Name="GameTypeComboBox" Width="220"
                    ItemsSource="{Binding GameTypes}"
                    KeyDown="Input_KeyDown"
                    PlaceholderText="{Binding Source='Select game type', Converter={StaticResource L}}"
                    SelectedItem="{Binding SelectedGameType, Mode=TwoWay}" />

            </StackPanel>
            <StackPanel
                Margin="0,14,0,0" HorizontalAlignment="Left" Orientation="Horizontal"
                Spacing="8">
                <Button
                    Click="FilterButton_Click"
                    Content="{Binding Source='FilterButton', Converter={StaticResource L}, Mode=OneWay}"
                    Style="{StaticResource AccentButtonStyle}" />
                <Button
                    Background="{StaticResource ControlFillColorDefaultBrush}"
                    Click="ClearFilterButton_Click"
                    Content="{Binding Source='Clear filters', Converter={StaticResource L}, Mode=OneWay}" />
            </StackPanel>
        </StackPanel>
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Visible">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid Grid.Row="0" Margin="16">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <Grid Grid.Row="0" Margin="0,0,0,0">
                        <TextBlock
                            Grid.Row="0" FontSize="16" FontWeight="Bold"
                            Text="{Binding Source='All games', Converter={StaticResource L}, Mode=OneWay}" />
                    </Grid>

                    <ItemsControl
                        x:Name="GamesItemsControl" Grid.Row="1" Margin="0,12,0,12"
                        ItemsSource="{Binding GamesList}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <controls:WrapPanel Orientation="Horizontal" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate x:DataType="models:Game">
                                <Button
                                    Width="160" Height="220" Margin="0,0,14,14"
                                    Padding="14" HorizontalAlignment="Left" VerticalAlignment="Top"
                                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource ControlElevationBorderBrush}"
                                    BorderThickness="1" Click="ButtonGame_Click" CornerRadius="8"
                                    Tag="{Binding GameSymbol}">

                                    <StackPanel HorizontalAlignment="Center" Spacing="8">
                                        <Image
                                            Width="80" Height="80" HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            Source="{x:Bind LogoImage, Mode=OneWay}"
                                            Stretch="Uniform" />

                                        <!--  Tytuł  -->
                                        <TextBlock
                                            FontSize="14" FontWeight="SemiBold"
                                            Text="{Binding GameTitle}"
                                            TextAlignment="Center" TextWrapping="WrapWholeWords" />

                                        <!--  Deweloper  -->
                                        <TextBlock
                                            FontSize="12"
                                            Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                            Text="{Binding GameDeveloper}"
                                            TextAlignment="Center" TextWrapping="Wrap" />

                                        <!--  Status  -->
                                        <TextBlock
                                            FontSize="12" FontWeight="Bold"
                                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                            Text="{Binding Source='Show more', Converter={StaticResource L}, Mode=OneWay}"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </Button>

                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </Grid>
            </Grid>
        </ScrollViewer>
    </Grid>
</Page>
