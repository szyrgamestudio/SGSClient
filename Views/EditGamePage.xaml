<Page x:Class="SGSClient.Views.EditGamePage" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:behaviors="using:SGSClient.Behaviors" xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" behaviors:NavigationViewHeaderBehavior.HeaderMode="Never" mc:Ignorable="d">

    <Grid x:Name="ContentArea">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <ScrollViewer Grid.Row="0" Grid.Column="0" VerticalScrollBarVisibility="Visible">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  Podstawowe informacje  -->
                <StackPanel Grid.Row="0" Margin="5"
                            Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource ControlElevationBorderBrush}"
                            BorderThickness="0.5" CornerRadius="5">
                    <TextBlock Margin="5" Padding="5" FontSize="20"
                               Style="{ThemeResource BodyStrongTextBlockStyle}"
                               Text="Podstawowe informacje" />
                    <Rectangle Height="1" HorizontalAlignment="Stretch"
                               Fill="{ThemeResource ControlElevationBorderBrush}" />
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="10px" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                        </Grid>
                        <TextBlock Grid.Column="0" Margin="0,5,5,0" Padding="0,5,5,0" HorizontalAlignment="Center" Text="Nazwa gry:*" />
                        <TextBox x:Name="gameNameTextBox" Grid.Column="1" Width="400" Margin="125,5,5,5" PlaceholderText="Nazwa gry"
                                 Text="{Binding GameName, Mode=TwoWay}" />
                    </StackPanel>
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="10px" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                        </Grid>
                        <TextBlock Grid.Column="0" Margin="0,5,5,0" Padding="0,5,5,0" HorizontalAlignment="Center" Text="Symbol / nazwa folderu gry:*" />
                        <TextBox x:Name="symbolTextBox" Grid.Column="1" Width="400" Margin="20,5,5,5" PlaceholderText="Symbol"
                                 Text="{Binding Symbol, Mode=TwoWay}" />
                    </StackPanel>
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="10px" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                        </Grid>
                        <TextBlock Grid.Column="0" Margin="0,5,5,0" Padding="0,5,5,0" HorizontalAlignment="Center" Text="Aktualna wersja gry:*" />
                        <TextBox x:Name="versionTextBox" Grid.Column="1" Width="400" Margin="70,5,5,5" PlaceholderText="1.0.0"
                                 Text="{Binding CurrentVersion, Mode=TwoWay}" />
                    </StackPanel>
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="10px" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                        </Grid>
                        <TextBlock Margin="0,5,60,0" Padding="0,5,5,0" HorizontalAlignment="Center" Text="Plik ZIP z grą:*" />
                        <TextBox x:Name="linkZIPTextBox" Grid.Column="1" Width="400" Margin="55,5,5,5" IsReadOnly="True"
                                 PlaceholderText="Plik ZIP"
                                 Text="{Binding ZipLink, Mode=TwoWay}" />
                        <Button Margin="5" Click="PickZIPFile_Click" Content="Wybierz plik" />
                    </StackPanel>
                    <StackPanel VerticalAlignment="Center" Orientation="Horizontal">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="10px" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                        </Grid>
                        <TextBlock Grid.Column="0" Margin="0,5,5,0" Padding="0,5,5,0" HorizontalAlignment="Center" Text="Plik wykonawczy gry:*" />
                        <TextBox x:Name="gameEXETextBox" Grid.Column="1" Width="400" Margin="65,5,5,5" PlaceholderText="Nazwa EXE"
                                 Text="{Binding ExeName, Mode=TwoWay}" />
                    </StackPanel>
                </StackPanel>

                <!--  Logo gry  -->
                <StackPanel Grid.Row="1" Margin="5"
                            Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource ControlElevationBorderBrush}"
                            BorderThickness="0.5" CornerRadius="5">
                    <TextBlock Margin="5" Padding="5" FontSize="20"
                               Style="{ThemeResource BodyStrongTextBlockStyle}"
                               Text="Logo gry" />
                    <Rectangle Height="1" HorizontalAlignment="Stretch"
                               Fill="{ThemeResource ControlElevationBorderBrush}" />
                    <ScrollViewer Grid.Row="0" Grid.Column="0" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Visible">
                        <StackPanel x:Name="gameLogoStackPanel" Grid.Row="0" Margin="5"
                                    Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource ControlElevationBorderBrush}"
                                    BorderThickness="0.5" CornerRadius="5" Orientation="Horizontal">
                            <Rectangle Height="1" HorizontalAlignment="Stretch"
                                       Fill="{ThemeResource ControlElevationBorderBrush}" />

                            <!--  Placeholder for "Add Image"  -->
                            <Button x:Name="AddLogoBtn" Width="150" Height="150" Margin="5" Click="PickLogoImage_Click">
                                <Grid Background="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}">
                                    <FontIcon HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="48" Glyph="&#xE710;" />
                                </Grid>
                            </Button>

                            <!--  ItemsControl for displaying game images  -->
                            <ItemsControl x:Name="LogosGrid" ItemsSource="{Binding GameLogos}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <ItemsWrapGrid Margin="5" ItemHeight="150" ItemWidth="150" Orientation="Horizontal" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Width="150" Height="150" Margin="5"
                                              Background="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}">
                                            <Image Source="{Binding ImageSource}" Stretch="UniformToFill" />
                                            <StackPanel Margin="5" HorizontalAlignment="Center" VerticalAlignment="Top" Orientation="Horizontal">
                                                <Button Click="RemoveLogoButton_Click" ToolTipService.ToolTip="Usuń">
                                                    <FontIcon Glyph="&#xE74D;" />
                                                </Button>
                                                <Button Click="PreviewImageButton_Click" ToolTipService.ToolTip="Podgląd">
                                                    <FontIcon Glyph="&#xE71E;" />
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </ScrollViewer>
                </StackPanel>

                <!--  Zrzuty ekranu  -->
                <StackPanel Grid.Row="2" Margin="5"
                            Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource ControlElevationBorderBrush}"
                            BorderThickness="0.5" CornerRadius="5">
                    <TextBlock Margin="5" Padding="5" FontSize="20"
                               Style="{ThemeResource BodyStrongTextBlockStyle}"
                               Text="Zrzuty ekranu" />
                    <ScrollViewer Grid.Row="0" Grid.Column="0" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Visible">
                        <StackPanel x:Name="gameGalleryStackPanel" Grid.Row="0" Margin="5"
                                    Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource ControlElevationBorderBrush}"
                                    BorderThickness="0.5" CornerRadius="5" Orientation="Horizontal">
                            <Rectangle Height="1" HorizontalAlignment="Stretch"
                                       Fill="{ThemeResource ControlElevationBorderBrush}" />

                            <!--  Placeholder for "Add Image"  -->
                            <Button Width="150" Height="150" Margin="5" Click="PickScreenshotImage_Click">
                                <Grid Background="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}">
                                    <FontIcon HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="48" Glyph="&#xE710;" />
                                </Grid>
                            </Button>

                            <!--  ItemsControl for displaying game images  -->
                            <ItemsControl x:Name="ImagesGrid" ItemsSource="{Binding GameImages}">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <ItemsWrapGrid Margin="5" ItemHeight="150" ItemWidth="150" Orientation="Horizontal" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Width="150" Height="150" Margin="5"
                                              Background="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}">
                                            <Image Source="{Binding ImageSource}" Stretch="UniformToFill" />
                                            <StackPanel Margin="5" HorizontalAlignment="Center" VerticalAlignment="Top" Orientation="Horizontal">
                                                <Button Click="RemoveImageButton_Click" ToolTipService.ToolTip="Usuń">
                                                    <FontIcon Glyph="&#xE74D;" />
                                                </Button>
                                                <Button Click="PreviewImageButton_Click" ToolTipService.ToolTip="Podgląd">
                                                    <FontIcon Glyph="&#xE71E;" />
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                    </ScrollViewer>
                </StackPanel>

                <!--  Opis  -->
                <StackPanel Grid.Row="3" Margin="5"
                            Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource ControlElevationBorderBrush}"
                            BorderThickness="0.5" CornerRadius="5">
                    <TextBlock Margin="5" Padding="5" FontSize="20"
                               Style="{ThemeResource BodyStrongTextBlockStyle}"
                               Text="Opis" />
                    <Rectangle Height="1" HorizontalAlignment="Stretch"
                               Fill="{ThemeResource ControlElevationBorderBrush}" />
                    <!--<TextBox Height="100" Text="{Binding GameDescription, Mode=TwoWay}" PlaceholderText="Tutaj wprowadź opis swojej gry" Margin="5" Padding="5" FontSize="14" x:Name="gameDescriptionTextBox" AutomationProperties.Name="multi-line TextBox" TextWrapping="Wrap" AcceptsReturn="True"></TextBox>-->
                    <RichEditBox x:Name="gameDescriptionRichEditBox" AutomationProperties.Name="editor with custom menu" Loaded="GameDescriptionRichEditBox_Loaded" TextChanged="GameDescriptionRichEditBox_TextChanged" />

                </StackPanel>

                <!--  Wymagania systemowe  -->
                <StackPanel Grid.Row="4" Margin="5"
                            Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource ControlElevationBorderBrush}"
                            BorderThickness="0.5" CornerRadius="5">
                    <TextBlock Margin="5" Padding="5" FontSize="20"
                               Style="{ThemeResource BodyStrongTextBlockStyle}"
                               Text="Wymagania systemowe" />
                    <Rectangle Height="1" HorizontalAlignment="Stretch"
                               Fill="{ThemeResource ControlElevationBorderBrush}" />
                    <!--<TextBox Height="100" Text="{Binding HardwareRequirements, Mode=TwoWay}" PlaceholderText="Tutaj wprowadź wymagania sprzętowe swojej gry" Margin="5" Padding="5" FontSize="14" x:Name="hardwareRequirementsTextBox" AutomationProperties.Name="multi-line TextBox" TextWrapping="Wrap" AcceptsReturn="True"></TextBox>-->
                    <RichEditBox x:Name="hardwareRequirementsRichEditBox" AutomationProperties.Name="editor with custom menu" Loaded="HardwareRequirementsRichEditBox_Loaded" TextChanged="HardwareRequirementsRichEditBox_TextChanged" />
                </StackPanel>

                <!--  Pozostałe informacje  -->
                <StackPanel x:Name="OtherInformationsStackPanel" Grid.Row="5" Margin="5"
                            Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
                            BorderBrush="{ThemeResource ControlElevationBorderBrush}"
                            BorderThickness="0.5" CornerRadius="5">
                    <TextBlock Margin="5" Padding="5" FontSize="20"
                               Style="{ThemeResource BodyStrongTextBlockStyle}"
                               Text="Pozostałe informacje" />
                    <Rectangle Height="1" HorizontalAlignment="Stretch"
                               Fill="{ThemeResource ControlElevationBorderBrush}" />
                    <ComboBox x:Name="comboBoxGameEngine" Grid.Row="3" Grid.Column="1" Width="200" Margin="5"
                              VerticalAlignment="Center"
                              ItemsSource="{Binding GameEngines}"
                              PlaceholderText="Wybierz silnik gry"
                              SelectedItem="{Binding SelectedGameEngine, Mode=TwoWay}" />
                    <ComboBox x:Name="comboBoxGameType" Grid.Row="4" Grid.Column="1" Width="200" Margin="5"
                              VerticalAlignment="Center"
                              ItemsSource="{Binding GameTypes}"
                              PlaceholderText="Wybierz rodzaj gry"
                              SelectedItem="{Binding SelectedGameType, Mode=TwoWay}" />
                    <!--<TextBox Text="{Binding GameLogo, Mode=TwoWay}" PlaceholderText="Tutaj wprowadź dodatkowe informacje o grze" Margin="5" Padding="5" FontSize="14" x:Name="otherInfoTextBox" AutomationProperties.Name="multi-line TextBox" TextWrapping="Wrap" AcceptsReturn="True"></TextBox>-->
                    <RichEditBox x:Name="otherInfoRichEditBox" AutomationProperties.Name="editor with custom menu" Loaded="OtherInfoRichEditBox_Loaded" TextChanged="OtherInfoRichEditBox_TextChanged" />
                </StackPanel>
            </Grid>
        </ScrollViewer>

        <!--  Always visible buttons  -->
        <StackPanel Grid.Row="1" Grid.Column="0" Margin="5" HorizontalAlignment="Right" Orientation="Horizontal">
            <Button x:Name="CancelButton" Margin="5" Click="ButtonCancel_Click" Content="Anuluj" />

            <Button x:Name="SaveChangesButton" Margin="5" Content="Zapisz zmiany"
                    Style="{StaticResource AccentButtonStyle}">
                <Button.Flyout>
                    <Flyout x:Name="saveChangesFlyout">
                        <StackPanel>
                            <TextBlock Margin="0,0,0,12"
                                       Style="{ThemeResource BaseTextBlockStyle}"
                                       Text="Czy na pewno chcesz zapisać zmiany?&#x0a;Pamiętaj, że zmiany muszą zostać zaakceptowane przez administratora." />
                            <Button HorizontalAlignment="Center" VerticalAlignment="Center" Click="ButtonSave_Click" Content="Potwierdź"
                                    Style="{StaticResource AccentButtonStyle}" />
                        </StackPanel>
                    </Flyout>
                </Button.Flyout>
            </Button>
        </StackPanel>
    </Grid>
</Page>
